cmake_minimum_required(VERSION 4.1.0)
project(GameOfLife VERSION 1.0 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

add_compile_options(-Wall)

file(GLOB_RECURSE SOURCES CONFIGURE_DEPENDS src/*.cpp)
add_executable(GameOfLife ${SOURCES})

set(SFML_ROOT "${PROJECT_SOURCE_DIR}/external/SFML-3.0.0")
target_include_directories(GameOfLife PRIVATE "${SFML_ROOT}/include")
target_include_directories(GameOfLife PRIVATE ${PROJECT_SOURCE_DIR}/include)
target_link_directories(GameOfLife PRIVATE "${SFML_ROOT}/lib")

target_link_libraries(GameOfLife PRIVATE
    sfml-graphics
    sfml-window
    sfml-system
)

set(DLLS 
    "${PROJECT_SOURCE_DIR}/external/SFML-3.0.0/bin/sfml-graphics-3.dll"
    "${PROJECT_SOURCE_DIR}/external/SFML-3.0.0/bin/sfml-window-3.dll"
    "${PROJECT_SOURCE_DIR}/external/SFML-3.0.0/bin/sfml-system-3.dll"
)
foreach(DLL ${DLLS})
    add_custom_command(TARGET GameOfLife POST_BUILD
        COMMAND ${CMAKE_COMMAND} -E copy_if_different
        "${DLL}"
        "${CMAKE_BINARY_DIR}" 
    )
endforeach()